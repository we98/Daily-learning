1. 每一个用户都有一个uid，每一个用户组也都有一个gid。对于uid，用户登陆时，系统会查找/etc/passwd文件并获取其uid，之后的操作都是根据这个uid进行。对于用户组信息，系统也会查找/etc/group来获取。特殊的是，为了保证系统安全性，用户的密码并不在/etc/passwd中，而是在/etc/shadow文件中。除此之外，用户组也有密码（也许会有疑问，用户组并不是真正的用户，它只是提供了一个用于方便描述文件访问的权限的容器），保存在/etc/gshadow中。

2. linux中用户分为大致两种，每个用户都有用户id（16位整数 0-65535)，它们分别是：
- 管理员，默认uid为0，不可改变
- 普通用户，①系统用户（1-499），比如，在登陆之前，就已经有很多进程在运行了，这些后台服务仍然需要用户id才能运行，然而，以管理员身份显然不合适，万一被恶意劫持，后果不堪设想，因此，很多运行在后台不需要与用户关联的服务进程也需要关联一个普通的用户，这就是系统用户，这种用户时不能登录的②普通用户（500-），可以直接登录获取资源的用户。创建用户时，如果没有给用户指定默认组，则会直接建立一个用户的私有组，只包括这一个用户，且同名。一个用户也可以属于其他多个组，这多个组叫做附加组。

3. /etc/passwd中每一行记录了其中一个用户的7个属性，如we98:x:1001:1001:we98,,,:/home/we98:/bin/bash，使用man 5 passwd即可看到，它们分别代表①帐户名②密码，但是一般都是一个占位符，真正的密码在/etc/shadow中③用户id④基本组id（还有附加组，查看附加组到/etc/group中，不是私有组）⑤用户的信息描述，姓名、电话等，用逗号隔开⑥家目录⑦用户默认shell，登录之后自动打开的shell，系统用户一般都是nologin，而普通用户是bash。可以通过cat /etc/shells查看系统中带有的shell

4. /etc/shadow中每一行有9个属性，①用户名②通过加密后的密码，通过单向加密获得，第二个和第三个$之间是杂质，随机生成加入到源密码中，因此即使两个密码完全一致，而杂质不相同，表现出的特征码也不相同，登陆时，通过用户输入+杂质算出特征码，再与/etc/shadow作比较，即可判断是否登录成功。系统用户的这个部分一般是*或者!!，代表不可登录，所以如果不想让一个用户登录，只需要在这个字段前加上*或!!即可③记录上次修改密码距离1970.1.1过了多少天，通过当前日期距离1970.1.1多少天可以算出二者之差，即上次修改密码已经过了多少天，提醒用户换密码④密码最短使用期限，0表示不做限定⑤密码最长使用期限⑥离密码过期多少天开始向用户警告⑦密码过期宽限时间段，在这段时间里，用户只要登录，就会被提示要改密码，要不然啥也不能干⑧规定过期时间，即使没有过期，到了这一天也要过期，比如给一个实习两个月的实习生的账号就要满足这点⑨保留字段，没有意义。

5. /etc/group中每一行有4个属性，①组名②密码占位符③组id④以当前组为附加组的所有用户，用逗号隔开，没有，为空。

6. 手动创建用户
- 修改/etc/passwd 修改/etc/shadow 修改/etc/group
- 创建家目录，如/home/newuser/
- 将/etc/skel/复制到/home/newuser/，同时修改包括/home/newuser/在内的所有子文件为600,因为家目录默认的权限就是不允许其他用户使用并且不能让自己随意有执行权限
如：有以下需求，手动添加用于hive，基本组为hive（5000），附加组为we98
- 首先编辑/etc/group，在最后一行添加hive:x:5000:  同时在we98的那一行的附加用户加上hive
- 然后编辑/etc/passwd,在最后一行添加hive:x:5000:5000::/home/hive:/bin/bash
- 接着编辑/etc/shadow，在最后一行添加hive:!!:....，后面的参考上面的用户即可完成，注意这里暂时没设置密码
- 将/etc/skel/拷贝到/home/hive中，为新用户创建家目录
- 修改/home/hive即目录下所有文件的权限，将组访问权限和其他用户访问权限均置为0。将/home/hive目录以及所有文件属组和属主都修改为hive
- 注意，我们也可以手动在/etc/shadow文件下加密码，使用openssl passwd -1 -salt '12345677'（八个字符）,然后再输入密码即可获得一个md5加密的带有杂质的加密字符串，复制到/etc/shadow中即可。

7. 几个关于系统环境和个人环境的（bash）配置文件：
- 全局配置，主要有以下几个配置文件：/etc/profile，/etc/profile.d/*.sh，/etc/bachrc，编辑了这些文件中的任何一个对所有用户都生效。
- 个人配置，主要是~/.bash_profile和~/.bashrc。
profile类的文件主要作用有：设置环境变量（如果想设置全局环境变量，可以通过在/etc/profile或/etc/profile.d/下的文件中定义来实现，如果只想设置个人的话，编辑~/.bash_profile即可，如果二者存在不同，以~/.bash_profile为准）、运行命令或脚本（比如在用户登陆时发送hello信息、登录时的准备工作等）
bashrc类的文件主要作用有：设定本地变量（与环境变量不同，作用域不同，具体概念参见shell编程）、定义命令别名

8. **用户的shell登录类型**，站在用户的角度来讲，shell有两种：
- 登陆式shell（正常通过某终端登录、su - USERNAME、su -l USERNAME）读取配置文件的方式：/etc/profile-->/etc/profile.d/*.sh-->~/.bash_profile-->~./bashrc-->/etc/bashrc
- 非登陆式shell（su USERNAME、在图形终端下打开命令窗口、自动执行的shell脚本）读取顺序为：~/.bashrc-->/etc/bashrc-->/etc/profile.d/*.sh
因此，两种su是不一样的。比如想要永远的给用户we98设置cls作为clear的别名，就可以在~/.bashrc中添加alias cls=clear（或者直接使用echo "alias cls=clear" >> ~/.bashrc）。





补充：加密算法
- 对称加密：加密和解密使用同一个密钥
- 公钥加密：每个密钥成对出现，一个为私钥，一个为公钥匙
- 单向加密：散列加密，提取数据特征得到的特征码，常用于数据校验。单向加密有这样的特征：①蝴蝶效应（雪崩效应），一丁点的改变会使特征码改变大部分②定长输出，MD5 128位定长输出 SHA1 secure hash algorithm













